"use strict";(self["webpackChunkrx"]=self["webpackChunkrx"]||[]).push([[45],{8045:function(e,s,t){t.r(s),t.d(s,{default:function(){return f}});var o=function(){var e=this,s=e._self._c;return s("div",{staticClass:"login"},[s("van-nav-bar",{attrs:{"right-text":"先逛一逛"},on:{"click-right":function(s){return e.goState("Home")}},scopedSlots:e._u([{key:"left",fn:function(){return[s("div",{staticClass:"nav-left"},[s("div",{staticClass:"logo"},[s("img",{attrs:{src:"",alt:""}})]),s("div",{staticClass:"logo-text"},[e._v("luckin coffee")])])]},proxy:!0}])}),s("div",{staticClass:"user-box"},[e._m(0),s("van-form",[s("van-field",{attrs:{name:"手机号",label:"手机号",placeholder:"手机号",autocomplete:"off"},model:{value:e.userInfo.phone,callback:function(s){e.$set(e.userInfo,"phone",s)},expression:"userInfo.phone"}}),s("van-field",{attrs:{name:"密码",label:"密码",placeholder:"输入密码",autocomplete:"off",type:e.isRegisterPassword?"password":"text","right-icon":e.isRegisterPassword?"closed-eye":"eye-o"},on:{"click-right-icon":e.isRegisterPasswordType},model:{value:e.userInfo.password,callback:function(s){e.$set(e.userInfo,"password",s)},expression:"userInfo.password"}}),s("div",{staticClass:"forgot"},[s("span",[e._v("忘记密码?")])]),s("div",{staticClass:"commit-btn"},[s("van-button",{attrs:{round:"",block:"",color:"#0C34BA"},on:{click:e.login}},[e._v("登录")])],1),s("div",{staticClass:"commit-btn"},[s("van-button",{attrs:{round:"",block:"",type:"default"},on:{click:e.toggleRegisterBox}},[e._v("注册")])],1)],1)],1),s("van-popup",{staticClass:"register-box",attrs:{position:"buttom",closeable:""},model:{value:e.isShow,callback:function(s){e.isShow=s},expression:"isShow"}},[s("div",{staticClass:"register-title"},[e._v("注册")]),s("van-form",[s("van-field",{attrs:{name:"手机号",label:"手机号",placeholder:"手机号",autocomplete:"off"},model:{value:e.userRegisterInfo.phone,callback:function(s){e.$set(e.userRegisterInfo,"phone",s)},expression:"userRegisterInfo.phone"}}),s("van-field",{attrs:{name:"密码",label:"密码",placeholder:"输入密码",autocomplete:"off",type:e.isRegisterPassword?"password":"text","right-icon":e.isRegisterPassword?"closed-eye":"eye-o"},on:{"click-right-icon":e.isRegisterPasswordType},model:{value:e.userRegisterInfo.password,callback:function(s){e.$set(e.userRegisterInfo,"password",s)},expression:"userRegisterInfo.password"}}),s("van-field",{attrs:{name:"呢称",label:"呢称",placeholder:"输入呢称",autocomplete:"off"},model:{value:e.userRegisterInfo.nickName,callback:function(s){e.$set(e.userRegisterInfo,"nickName",s)},expression:"userRegisterInfo.nickName"}}),s("div",{staticClass:"commit-btn register-btn"},[s("van-button",{attrs:{round:"",block:"",color:"#0C34BA"},on:{click:e.register}},[e._v("注册")])],1)],1)],1)],1)},a=[function(){var e=this,s=e._self._c;return s("div",{staticClass:"user-title"},[s("div",{staticClass:"welcome"},[e._v("欢迎回来")]),s("div",{staticClass:"sud-title"},[e._v("Plaese login to your account")])])}],r=(t(6743),t(8848)),i=t(6369);i.ZP.use(r.Z);class n{constructor(){}valid(e){for(let s in e)if(!e[s].reg.test(e[s].value))return(0,r.Z)(e[s].errorMsg),!1;return!0}}const l=new n;var c={name:"Login",data(){return{isShow:!1,isRegisterPassword:!0,userRegisterInfo:{phone:"",password:"",nickName:""},userInfo:{phone:"",password:""}}},methods:{toggleRegisterBox(){this.isShow=!0},goState(e){console.log(e),this.$router.push({name:e})},isRegisterPasswordType(){this.isRegisterPassword=!this.isRegisterPassword},register(){let e={phone:{value:this.userRegisterInfo.phone,errorMsg:"手机号格式不正确",reg:/^1[3-9]\d{9}$/},password:{value:this.userRegisterInfo.password,errorMsg:"密码由字母数字下划线组合（6-16字符）",reg:/^[A-Za-z]\w{5,15}$/},nickName:{value:this.userRegisterInfo.nickName,errorMsg:"呢称由字母数字下划线汉字组合（1-10字符）",reg:/^[\w\u4e00-\u9fa5]{1,10}$/}},s=l.valid(e);if(s){let e=Object.assign({},this.userRegisterInfo);e.appkey=this.appkey,this.$toast.loading({message:"加载中...",duration:0}),this.axios({method:"POST",url:"/register",data:e}).then((e=>{this.$toast.clear(),console.log(e),100==e.data.code?this.isShow=!1:this.$toast(e.data.msg)})).catch((e=>{this.$toast.clear()}))}},login(){let e={phone:{value:this.userInfo.phone,errorMsg:"手机号格式不正确",reg:/^1[3-9]\d{9}$/},password:{value:this.userInfo.password,errorMsg:"密码由数字字母下划线组合（6-16字符）",reg:/^[A-Za-z]\w{5,15}$/}},s=l.valid(e);if(s){let e=Object.assign({},this.userInfo);e.appkey=this.appkey,this.$toast.loading({message:"加载中...",duration:0}),this.axios({method:"POST",url:"/login",data:e}).then((e=>{this.$toast.clear(),console.log(e),200==e.data.code?(localStorage.setItem("__tk",e.data.token),this.$router.push({name:"Home"})):this.$toast(e.data.msg)})).catch((e=>{this.$toast.clear()}))}}}},u=c,d=t(1001),g=(0,d.Z)(u,o,a,!1,null,"4bc7921a",null),f=g.exports}}]);
//# sourceMappingURL=45.9054d0aa.js.map