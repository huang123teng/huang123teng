{"version":3,"file":"js/472.0a0b621a.js","mappings":"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","sources":["webpack://rx/./src/views/Detail.vue","webpack://rx/src/views/Detail.vue","webpack://rx/./src/views/Detail.vue?adb2","webpack://rx/./src/views/Detail.vue?b332"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"detail\"},[_c('van-nav-bar',{attrs:{\"title\":\"商品详细\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft,\"click-right\":function($event){_vm.showShare = true}},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"ellipsis\",\"size\":\"20\"}})]},proxy:true}])}),_c('van-share-sheet',{attrs:{\"title\":\"立即分享给好友\",\"options\":_vm.options},on:{\"select\":_vm.onSelect},model:{value:(_vm.showShare),callback:function ($$v) {_vm.showShare=$$v},expression:\"showShare\"}}),_c('div',[_c('img',{staticClass:\"auto_img\",attrs:{\"src\":_vm.productDetail.large_img,\"alt\":\"\"}})]),_c('div',{staticClass:\"pro_info_box\"},[_c('div',{staticClass:\"pro_info\"},[_c('div',{staticClass:\"pro_box clearfix\"},[_c('div',{staticClass:\"fl\"},[_c('div',{staticClass:\"pro_name\"},[_vm._v(_vm._s(_vm.productDetail.name))]),_c('div',{staticClass:\"pro_enname\"},[_vm._v(_vm._s(_vm.productDetail.ennmae))])]),_c('div',{staticClass:\"pro_price\"},[_vm._v(\"￥\"+_vm._s(_vm.productDetail.price))])]),_c('div',{staticClass:\"rule_box\"},_vm._l((_vm.productDetail.rules),function(item,index){return _c('div',{key:index,staticClass:\"rule_item clearfix\"},[_c('div',{staticClass:\"rule_title fl\"},[_vm._v(_vm._s(item.title))]),_c('div',{staticClass:\"fl\"},_vm._l((item.rule),function(v,i){return _c('div',{key:i,staticClass:\"r_item fl\",class:{ active: item.ruleIndex == i },on:{\"click\":function($event){return _vm.toggleRule(item, i)}}},[_vm._v(\" \"+_vm._s(v.title)+\" \")])}),0)])}),0),_c('div',{staticClass:\"c_box clearfix\"},[_c('div',{staticClass:\"select_count fl\"},[_vm._v(\"选择数量\")]),_c('div',{staticClass:\"select_box fr\"},[_c('van-stepper',{attrs:{\"theme\":\"round\",\"button-size\":\"22\",\"disable-input\":\"\"}})],1)]),_c('div',{staticClass:\"desc_box\"},[_c('div',{staticClass:\"pro_desc\"},[_vm._v(\"商品描述\")]),_c('div',{staticClass:\"desc_text\"},_vm._l((_vm.productDetail.desc),function(item,index){return _c('div',{key:index,staticClass:\"text_item\"},[_vm._v(\" \"+_vm._s(index + 1)+\"、\"+_vm._s(item)+\" \")])}),0)])]),_c('van-goods-action',[_c('van-goods-action-icon',{attrs:{\"icon\":\"bag\",\"text\":\"购物袋\",\"color\":\"#000\"}}),_c('van-goods-action-icon',{attrs:{\"icon\":\"like\",\"text\":_vm.isLike ? '已收藏' : '未收藏',\"color\":_vm.isLike ? '#0c34ba' : '#000'},on:{\"click\":_vm.toggleLikeProduct}}),_c('van-goods-action-button',{attrs:{\"color\":\"#566db8\",\"text\":\"加入购物车\"},on:{\"click\":_vm.addShopbag}}),_c('van-goods-action-button',{attrs:{\"color\":\"#7232dd\",\"text\":\"立即购买\"}})],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"detail\">\r\n    <van-nav-bar\r\n      title=\"商品详细\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      @click-left=\"onClickLeft\"\r\n      @click-right=\"showShare = true\"\r\n    >\r\n      <template #right>\r\n        <van-icon name=\"ellipsis\" size=\"20\" />\r\n      </template>\r\n    </van-nav-bar>\r\n    <van-share-sheet\r\n      v-model=\"showShare\"\r\n      title=\"立即分享给好友\"\r\n      :options=\"options\"\r\n      @select=\"onSelect\"\r\n    />\r\n    <div>\r\n      <img class=\"auto_img\" :src=\"productDetail.large_img\" alt=\"\" />\r\n    </div>\r\n\r\n    <div class=\"pro_info_box\">\r\n      <div class=\"pro_info\">\r\n        <div class=\"pro_box clearfix\">\r\n          <div class=\"fl\">\r\n            <div class=\"pro_name\">{{ productDetail.name }}</div>\r\n            <div class=\"pro_enname\">{{ productDetail.ennmae }}</div>\r\n          </div>\r\n          <div class=\"pro_price\">￥{{ productDetail.price }}</div>\r\n        </div>\r\n        <div class=\"rule_box\">\r\n          <div\r\n            class=\"rule_item clearfix\"\r\n            v-for=\"(item, index) in productDetail.rules\"\r\n            :key=\"index\"\r\n          >\r\n            <div class=\"rule_title fl\">{{ item.title }}</div>\r\n            <div class=\"fl\">\r\n              <div\r\n                class=\"r_item fl\"\r\n                v-for=\"(v, i) in item.rule\"\r\n                :key=\"i\"\r\n                :class=\"{ active: item.ruleIndex == i }\"\r\n                @click=\"toggleRule(item, i)\"\r\n              >\r\n                {{ v.title }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"c_box clearfix\">\r\n          <div class=\"select_count fl\">选择数量</div>\r\n          <div class=\"select_box fr\">\r\n            <van-stepper theme=\"round\" button-size=\"22\" disable-input />\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"desc_box\">\r\n          <div class=\"pro_desc\">商品描述</div>\r\n          <div class=\"desc_text\">\r\n            <div\r\n              class=\"text_item\"\r\n              v-for=\"(item, index) in productDetail.desc\"\r\n              :key=\"index\"\r\n            >\r\n              {{ index + 1 }}、{{ item }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- <div> -->\r\n      <van-goods-action>\r\n        <van-goods-action-icon icon=\"bag\" text=\"购物袋\" color=\"#000\" />\r\n        <van-goods-action-icon\r\n          icon=\"like\"\r\n          :text=\"isLike ? '已收藏' : '未收藏'\"\r\n          :color=\"isLike ? '#0c34ba' : '#000'\"\r\n          @click=\"toggleLikeProduct\"\r\n        />\r\n        <van-goods-action-button\r\n          color=\"#566db8\"\r\n          text=\"加入购物车\"\r\n          @click=\"addShopbag\"\r\n        />\r\n        <van-goods-action-button color=\"#7232dd\" text=\"立即购买\" />\r\n      </van-goods-action>\r\n      <!-- </div> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"../assets/less/detail.less\";\r\n\r\nexport default {\r\n  name: \"Detail\",\r\n  data() {\r\n    return {\r\n      // 分享面板\r\n      showShare: false,\r\n      options: [\r\n        [\r\n          { name: \"微信\", icon: \"wechat\" },\r\n          { name: \"朋友圈\", icon: \"wechat-moments\" },\r\n          { name: \"微博\", icon: \"weibo\" },\r\n          { name: \"QQ\", icon: \"qq\" },\r\n        ],\r\n        [\r\n          { name: \"复制链接\", icon: \"link\" },\r\n          { name: \"分享海报\", icon: \"poster\" },\r\n          { name: \"二维码\", icon: \"qrcode\" },\r\n          { name: \"小程序码\", icon: \"weapp-qrcode\" },\r\n        ],\r\n      ],\r\n      //商品pid\r\n      pid: \"\",\r\n      //商品详情数据\r\n      productDetail: {},\r\n      //是否收藏商品\r\n      isLike:false,\r\n      //购物车数量\r\n      bagCount:0,\r\n      //商品数量\r\n      product:{\r\n        count:1,\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    //截取pid\r\n    this.pid = this.$route.params.pid;\r\n    //商品详情数据\r\n    this.getProductDetail();\r\n    //this.toggleLikeProduct();\r\n  },\r\n  methods: {\r\n    //NavBar导航模块\r\n    onClickLeft() {\r\n      //返回上一级\r\n      this.$router.back(-1);\r\n    },\r\n    onSelect(options) {\r\n      Toast(options.name);\r\n      this.showShare = false;\r\n    },\r\n    //获取商品详情数据\r\n    getProductDetail() {\r\n      //发起请求\r\n      this.axios({\r\n        //请求类型\r\n        method: \"GET\",\r\n        //请求路径\r\n        url: \"/productDetail\",\r\n        //请求参数\r\n        params: {\r\n          appkey: this.appkey,\r\n          pid: this.pid,\r\n        },\r\n      }).then((result) => {\r\n        console.log(result);\r\n        if (result.data.code == 600) {\r\n          let data = result.data.result[0];\r\n          data.desc = data.desc.split(/\\n/);\r\n          console.log(data.desc);\r\n          let rules = [];\r\n          let ruleData = [\"tem\", \"sugar\", \"milk\", \"cream\"];\r\n          ruleData.map((v) => {\r\n            let r = {};\r\n            r.title = data[v + \"_desc\"];\r\n            console.log(r);\r\n            //激活下标\r\n            r.ruleIndex = 0;\r\n            r.rule = [];\r\n            //获取规格字符串\r\n            let ruleString = data[v].split(\"/\");\r\n            ruleString.map((value) => {\r\n              if (value != \"\") {\r\n                r.rule.push({ title: value });\r\n                console.log(r.rule);\r\n              }\r\n            });\r\n            if (r.rule.length > 0) {\r\n              rules.push(r);\r\n            }\r\n          });\r\n          data.rules = rules;\r\n          this.productDetail = data;\r\n        }\r\n      });\r\n    },\r\n    //切换商品规格\r\n    toggleRule(item, i) {\r\n      item.ruleIndex = i;\r\n    },\r\n//收藏商品\r\ntoggleLikeProduct(){\r\n  //获取token\r\n  let tokenString=localStorage.getItem(\"__tk\");\r\n  if (!tokenString){\r\n    //跳回登录页面\r\n    this.$toast(\"请先登录\");\r\n    return this.$router.push({name: \"Login\"});\r\n  }\r\n  let url = this.isLike ? \"/notLike\" : \"/like\";\r\n  this.$toast.loading({\r\n    message:\"加载中...\",\r\n    forbidClick:true,\r\n    duration:0,\r\n  });\r\n  //发起请求\r\n  this.axios({\r\n    method:\"POST\",\r\n    url,\r\n    data:{\r\n      appkey:this.appkey,\r\n      pid:this.pid,\r\n      tokenString,\r\n    }\r\n  }).then((result) =>{\r\n    this.$toast.clear();\r\n    console.log(result);\r\n    if (result.data.code ==700){\r\n      //token检验无效，跳转到登录页面\r\n      this.$router.push({name:\"Login\"});\r\n    }else if(result.data.code ==800){\r\n      //token检验有效，需收藏改商品\r\n      this.isLike = true;\r\n    }\r\n  });\r\n},\r\n//加入购物车\r\naddShopbag(){\r\n  let  tokenString = localStorage.getItem(\"__tk\");\r\n  if (!tokenString){\r\n    this.$toast(\"请先登录\");\r\n    return this.$router.push({name:\"Login\"});\r\n  }\r\n  //请求参数：\r\n  //获取tokenString\r\n  //获取商品pid\r\n  //获取商品规格rule\r\n  //获取商品数量count\r\n  //获取appkey\r\n  let data ={\r\n    tokenString,\r\n    appkey:this.appkey,\r\n    count:this.product.count,\r\n    pid:this.pid,\r\n  };\r\n  //商品规格\r\n  let rs = [];\r\n  //便历productDetail.rules数组获取选择的商品规格\r\n  this.productDetail.rules.map((v) =>{\r\n    rs.push(v.rule[v.ruleIndex].title);\r\n    console.log(rs);\r\n  });\r\n  data.rule = rs.join(\"/\")\r\n  //发起请求\r\n  this.axios({\r\n    method:\"POST\",\r\n    url:\"/addShopcart\",\r\n    data,\r\n  }).then((result)=>{\r\n    console.log(result);\r\n    if (result.data.code ==700){\r\n      //token检验无效，跳转到登录页面\r\n      this.$router.push({name:\"Login\"});\r\n    }else if (result.data.code == 3000){\r\n      //加入购物袋\r\n      if (result.data.status == 1){\r\n        this.dagCount++;\r\n      }\r\n    }\r\n  })\r\n},\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=5a5f3726&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","onClickLeft","$event","showShare","scopedSlots","_u","key","fn","proxy","options","onSelect","model","value","callback","$$v","expression","productDetail","large_img","_v","_s","name","ennmae","price","_l","rules","item","index","title","rule","v","i","class","active","ruleIndex","toggleRule","desc","isLike","toggleLikeProduct","addShopbag","staticRenderFns","data","icon","pid","bagCount","product","count","created","methods","Toast","getProductDetail","method","url","params","appkey","then","result","console","ruleData","r","ruleString","message","forbidClick","duration","tokenString","rs","component"],"sourceRoot":""}